---
name: papers-workflow
description: This skill should be used when searching, fetching, and curating papers; prefer open preprints and store text under docs/papers with index updates.
last-updated: 2025-10-20
---

# Papers Workflow (Search, Fetch, Curate)

## Instructions

When to use this skill
- You are expanding the reading set, fetching OA versions of citations, or curating entries in `docs/papers/index.md`.
- You want to avoid re-downloading PDFs and keep everything searchable as text.

- Scope and goals
  - Expand and maintain a high‑signal literature set for the thesis (symplectic capacities on convex bodies, Viterbo, EHZ, billiards, ECH, embeddings, complexity).
  - Prefer open preprints (arXiv/author sites) even for paywalled publications; keep local text only to avoid repeated downloads.

- Where to search (order)
  - arXiv: exact title/author queries; prefer stable IDs (e.g., arXiv:2208.13666).
  - Author/institution pages and HAL for OA versions when arXiv is missing.
  - DOI landing pages for canonical metadata; do not rely on paywalled PDFs.
  - Secondary: seminar notes, slides, and blog posts for context; link but do not treat as primary.

- Local storage layout
  - Create `docs/papers/YYYY-author-keyword/` directories (hyphenated, concise slug).
  - Prefer `.tex` sources when available; otherwise convert PDF → Markdown as `paper.md`.
  - Add a short YAML preamble at the top of `paper.md` with `source:` and `fetched:`.

- Conversion (PDF → Markdown)
  - Quick path: `pdftotext -layout -nopgbrk input.pdf -` and wrap with a small header.
  - Keep only text; do not commit PDFs. For images/figures, keep links to the source.
  - Or use the helper: `uv run python scripts/fetch_paper.py --arxiv <id>` or `--doi <doi>`; it stores text, then prints an index snippet to paste.
  - Justfile shortcuts: `just fetch-arxiv ID=... STATUS=...` or `just fetch-doi DOI=... STATUS=...`.

- Update indices
  - Append to `docs/papers/index.md`: theme group, one‑line purpose, `Local:` path, `Status:` label (`core`, `useful`, `background`, `tangential`, `verify`).
  - If the item is not in scope, log it in `docs/papers/irrelevant.md` with a brief reason.
  - For paywalled items, note the OA status explicitly (e.g., “no arXiv preprint found”).
  - Add "Takeaways:" bullets per entry. Keep them unbalanced: some items get a 5‑word gist; others get 3–5 detailed bullets if that prevents future misreads.

- Suggested shell snippet
  - Use a small helper when fetching arXiv PDFs:
    ```bash
    fetch_convert() {
      url="$1"; outdir="$2"; outfile="$3"; title="$4"; meta_link="$5"
      mkdir -p "$outdir"; tmp_pdf="$(mktemp /tmp/paper.XXXXXX).pdf"
      curl -fsSL "$url" -o "$tmp_pdf"
      {
        echo "---"; echo "source: $meta_link"; echo "fetched: $(date -u +%F)"; echo "---"
        echo "# $title"; echo; pdftotext -layout -nopgbrk "$tmp_pdf" -
      } > "$outdir/$outfile"; rm -f "$tmp_pdf"
    }
    ```

- Guardrails
  - Respect licenses; prefer author‑hosted/arXiv sources; avoid redistributing paywalled PDFs.
  - Keep entries append‑only; move items across sections by changing `Status:` rather than deleting.
  - Make device/dtype choices explicit only in code contexts; not relevant here.
  - Prereqs: `pdftotext` must be installed (poppler-utils). Network is required for arXiv/OpenAlex/Crossref.

- Validate
  - Run `uv run python scripts/load_skills_metadata.py --quiet` to validate frontmatter and keep `AGENTS.md` listings fresh (use `--fix` to update autogenerated sections).

## Key Facts
- `docs/papers/index.md` is the canonical list of all considered items (useful or not); `irrelevant.md` tracks rejected items to prevent re‑triage.
- Quick PDF→text conversion is standardized: `pdftotext -layout -nopgbrk`.
- Prefer LaTeX sources (`.tex`) when available for searchability and diffs.

## Related Skills
- `skills/repo-layout.md` — structure and canonical locations.
- `skills/basic-environment.md` — shell practices and golden commands.
- `skills/writing.md` — thesis/document writing and artefact hygiene.
